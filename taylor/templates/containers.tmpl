<article class="containers">
  <%include file="create_cont.tmpl"/>
  <table class="containers">
    <tr class="cont_list">
      <th class="cont_name">Name</th>
      <th class="cont_status">Status/Metadata</th>
      <th class="cont_action">Action</th>
    </tr>
    % for i in containers:
    <a name="${i['name']}"></a>
    <tr class="cont_list">
      <td class="cont_name">
	<a href="${base}/${i['name']}" class="obj_name">
	  <img src="${top}/image/folder.png" class="cont_icon" alt="${i['name']} icon">${i['name']}
	</a>
      </td>
      <td class="cont_status">
	<ul class="status">
	  <li class="defalt_status">Count: ${i['count']}</li>
	  <li class="defalt_status">Size: ${i['bytes']}</li>
	  % for j in container_meta[i['name']].keys():
	  <li class="defalt_status">${j}: ${container_meta[i['name']][j]}</li>
	  % endfor
	</ul>
      </td>
      <td class="cont_action">
	<ul class="cont_action">
	  <li>
	    <a href="${base}/${i['name']}?_action=delete&_confirm=true" class="cont_action">Delete</a>
	  </li>
	  <li><a href="${base}?acl_edit=${i['name']}" class="cont_action">Edit ACL</a></li>
	  % if i['name'] == meta_edit:
	  <li><a href="${base}" class="cont_action">Stop editing MetaData</a></li>
	  % else:
	  <li><a href="${base}?meta_edit=${i['name']}#${i['name']}" class="cont_action">Edit Metadata</a></li>
	  % endif
	</ul>
      </td>
    </tr>
    % if i['name'] == meta_edit:
    <tr>
      <td colspan="3">
	<form action="" method="post">
	  <input type="hidden" name="_action" value="metadata">
	  <input type="hidden" name="container_name" value="${i['name']}">
	  <fieldset class="metadata_edit">
	    <legend>Metadata Edit</legend>
	    <table>
	      <tr><th>Key</th><th>Value</th><th>Remove</th></tr>
	      % for m in container_meta[i['name']].keys():
	      <tr><td>${m}</td><td>${container_meta[i['name']][m]}</td><td><input type="checkbox" name="remove-x-container-meta-${m.lower()}"></td></tr>
	      <input type="hidden" name="x-container-meta-${m.lower()}" value="${container_meta[i['name']][m]}">
	      % endfor
	      % for n in range(3):
	      <tr><td><input type="text" name="container_meta_key${n}" size="12" maxlength="256"></td>
		<td colspan="2"><input type="text" name="container_meta_val${n}" size="24" maxlength="256"></td></tr>
	      % endfor
	    </table>
	    <input type="submit" value="Commit">
	  </fieldset>
	</form>
      </td>
    </tr>
    % endif
    % endfor
  </table>
  % if len(containers)!=0:
  <%include file="create_cont.tmpl"/>
  % endif
</article>
